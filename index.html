<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Rainmeter Quote Skin Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-6 p-3">
                <!-- Column 1 -->
                <h1 class="display-4">Edit Quote</h1>
                <form>
                    <div class="mb-3">
                        <label for="quote" class="form-label">Quote:</label>
                        <textarea rows="3" class="form-control" id="quote" name="quote"
                            style="resize: both; max-width: 100%; min-width: 100%;"></textarea>
                        <div class="input-group">
                            <span class="input-group-text" id="quoteAlignment">Quote Alignment</span>
                            <select class="form-control" id="quoteAlignmentSelect" name="quoteAlignmentSelect">
                                <option value="left" selected>Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                                <option value="justify">Justify</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="byLine" class="form-label">By-Line:</label>
                        <input type="text" class="form-control" id="byLine" name="byLine">
                        <div class="input-group">
                            <span class="input-group-text" id="byLineAlignment">By-Line Alignment</span>
                            <select class="form-control" id="byLineAlignmentSelect" name="byLineAlignmentSelect">
                                <option value="left" selected>Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="font" class="form-label">Font:</label>
                        <div class="input-group">
                            <select class="form-control" id="fontSource" name="fontSource" disabled>
                                <option value="system">Windows Fonts</option>
                                <option value="google" disabled>Google Fonts</option>
                            </select>
                            <select class="form-control" id="fontName" name="fontName">
                                <optgroup label="Sans-serif"></optgroup>
                                <option value="Segoe UI">Segoe UI</option>
                                <option value="Segoe UI Semibold">Segoe UI Semibold</option>
                                <option value="Calibri">Calibri</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Arial">Arial</option>
                                </optgroup>

                                <optgroup label="Serif">
                                    <option value="Georgia">Georgia</option>
                                    <option value="Palatino Linotype">Palatino Linotype</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                </optgroup>

                                <optgroup label="Cursive">
                                    <option value="Segoe Script" selected>Segoe Script (Default)</option>
                                    <option value="Segoe Print">Segoe Print</option>
                                    <option value="Lucida Handwriting">Lucida Handwriting</option>
                                </optgroup>

                                <optgroup label="Monospace">
                                    <option value="Consolas">Consolas</option>
                                </optgroup>

                                <optgroup label="Custom">
                                    <option value="">Custom font name…</option>
                                </optgroup>
                            </select>
                        </div>
                        <div id="fontHelp" class="form-text">Fonts must be installed on your device</div>
                    </div>
                    <div class="mb-3">
                        <label for="fontColour" class="form-label">Font Colour:</label>
                        <div class="input-group">
                            <span class="input-group-text" id="colourHex">Hex: #ffffff</span>
                            <input type="color" class="form-control form-control-color" id="fontColour"
                                name="fontColour" value="#ffffff" title="Choose your color">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Add to Package</button>
                    <button type="file" class="btn btn-secondary">Combine With...</button>
                </form>
            </div>
            <div class="col-6 p-3">
                <!-- PREVIEW Content Here -->
                <h1 class="display-4">Preview</h1>
                <div class="mb-3 form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="previewDarkMode">
                    <label class="form-check-label" for="previewDarkMode">Dark preview</label>
                </div>
                <div class="mb-3">
                    <label for="previewRendered" class="form-label">Rendered Preview:</label>
                    <div id="previewRendered" class="p-3 border rounded" style="min-height:120px;">
                        <div class="d-flex justify-content-center align-items-center h-100">
                            <div id="previewContent" style="width:100%; max-width:600px;">
                                <div id="previewQuote" style="font-size:1.25rem;"></div>
                                <div id="previewByline" style="margin-top:0.75rem; opacity:0.9"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="col-12 p-3">
                <!-- Generated -->
                <h1 class="display-6">Generated Package</h1>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>

    <script>
        const colourInput = document.getElementById("fontColour");
        const colourHex = document.getElementById("colourHex");
        const quoteInput = document.getElementById("quote");
        const byLineInput = document.getElementById("byLine");
        const fontSelect = document.getElementById("fontName");

        const previewQuote = document.getElementById("previewQuote");
        const previewByline = document.getElementById("previewByline");
        const previewRendered = document.getElementById("previewRendered");
        const quoteAlignSelect = document.getElementById("quoteAlignmentSelect");
        const byLineAlignSelect = document.getElementById("byLineAlignmentSelect");
        const darkToggle = document.getElementById("previewDarkMode");

        // Prevent the form from submitting (avoid page reload)
        const form = document.querySelector('form');
        if (form) form.addEventListener('submit', (e) => e.preventDefault());

        function getFontFamilyValue() {
            const val = (fontSelect && fontSelect.value) ? fontSelect.value : '';
            return val || 'inherit';
        }

        function updatePreview() {
            const quote = quoteInput.value || '';
            const byline = byLineInput.value || '';
            const colour = (colourInput && colourInput.value) ? colourInput.value : '#000000';
            const fontFamily = getFontFamilyValue();

            // Update rendered preview (visible, styled)
            previewQuote.textContent = quote ? `"${quote}"` : '';
            previewByline.textContent = byline ? `— ${byline}` : '';

            // Preserve user line breaks and spacing inside the quote/byline
            previewQuote.style.whiteSpace = 'pre-wrap';
            previewByline.style.whiteSpace = 'pre-wrap';
            previewRendered.style.color = colour;
            previewRendered.style.fontFamily = fontFamily;

            // Apply alignment to rendered preview elements
            previewQuote.style.textAlign = (quoteAlignSelect && quoteAlignSelect.value) ? quoteAlignSelect.value : 'left';
            previewByline.style.textAlign = (byLineAlignSelect && byLineAlignSelect.value) ? byLineAlignSelect.value : 'right';

            // Dark/light background for preview only
            const dark = darkToggle && darkToggle.checked;
            previewRendered.style.backgroundColor = dark ? '#111' : '#fff';
            previewRendered.style.borderColor = dark ? '#444' : '#dee2e6';
        }

        // Set initial colour hex display and preview
        if (colourHex && colourInput) colourHex.textContent = colourInput.value.toUpperCase();
        updatePreview();

        // Wire up listeners for live updates
        if (quoteInput) quoteInput.addEventListener('input', updatePreview);
        if (byLineInput) byLineInput.addEventListener('input', updatePreview);
        if (fontSelect) fontSelect.addEventListener('change', updatePreview);
        if (quoteAlignSelect) quoteAlignSelect.addEventListener('change', updatePreview);
        if (byLineAlignSelect) byLineAlignSelect.addEventListener('change', updatePreview);
        if (darkToggle) darkToggle.addEventListener('change', updatePreview);
        if (colourInput) {
            colourInput.addEventListener('input', () => {
                colourHex.textContent = colourInput.value.toUpperCase();
                updatePreview();
            });
        }
    </script>
</body>

</html>